<!DOCTYPE html>
<html>

<head>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <style>
#mainform{
  align-content: center;
  margin: 2px;
}
#warning{
background-color: rgba(211, 190, 21, 0.5);

}
#subform{
  position: absolute;
  top: 15%;
  left: 50%;
  transform: translate(-50%,0%)
}
#urlform .hidden{
  opacity: 0;
}
#urlform .success{
  background-color: rgba(0, 65, 0, 0.5)
}
  </style>
  <title>Ericbruh's scuffed URL Shortener</title>
</head>

<body>
<div id="mainform">
  <div id="warning">âš  yeah dont expect this to work well</div>
  <div id="urlform" class="hidden"></div>
</div>

</div>
<div id="subform">
  Ericbruh's scuffed url shortener
  <br>
  <input id="form" placeholder="insert url here...">
  <button onclick="submitURL()" data-bs-toggle="collapse"  href="#url" class="btn btn-primary">Submit</button>
  <div class="collapse" id="url">
    <div id="urlbox" class="card card-body">
      loading...
    </div>
</div>
</body>
<script>
  let formCTN
  const URL = "https://ericbruh-urlshortener.onrender.com/shortenerAPI"
  async function submitURL(){
    formCTN = document.querySelector("#form").value
    console.log(formCTN)
    let shortenerAPI = await fetch(URL,{
      method: 'POST',
      headers: {'Content-Type':'application/json'},
      body: JSON.stringify({
        'link': formCTN
      })
    })
let response = await shortenerAPI.json()

      let code = JSON.stringify(response.code[0].code)
      document.querySelector("#urlbox").innerHTML = "Success! Your shortened url is: ericbruh-urlshortener.onrender.com/" + code.replace(/['"]+/g, '')
      console.log(JSON.stringify(response))
      
    
  }
</script>
</html>